surexr::ifs_countries$Name[surexr::ifs_countries$Code==treasury_bills_ausentes]
surexr::ifs_countries$Name[surexr::ifs_countries$Code==treasury_bills_ausentes]
surexr::ifs_countries$Code==treasury_bills_ausentes
surexr::ifs_countries
View(surexr::ifs_countries)
surexr::ifs_countries$Name[which(surexr::ifs_countries$Code==treasury_bills_ausentes)]
which(surexr::ifs_countries$Code==treasury_bills_ausentes)
treasury_bills_ausentes
paises_iso
unique(treasury_bills$iso2c)
3202/14
View(treasury_bills)
library(tidyverse)
treasury_bills_wide <- pivot_wider(treasury_bills)
View(treasury_bills_wide)
View(treasury_bills_wide)
treasury_bills_wide <- pivot_wider(treasury_bills, names_from = "iso2c", values_from = "FITB_PA")
View(treasury_bills_wide)
treasury_bills_ausentes
View(surexr::ifs_countries)
treasury_bills_ausentes
View(surexr::ifs_indicators)
View(treasury_bills)
paise_iso
paises_iso
paises_taxa_deposito <- c("AU", "CL", "CO", "KR", "ID", "PE", "SG", "TR")
paises_gov_bonds <- c("NO","DE")
library(tidyverse)
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
treasury_bills <- surexr::ifs_data(indicator = "FITB_PA",
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
treasury_bills_wide <- pivot_wider(treasury_bills, names_from = "iso2c", values_from = "FITB_PA")
treasury_bills_ausentes <- paises_iso[which(!paises_iso %in% unique(treasury_bills$iso2c))]
paises_taxa_deposito <- c("AU", "CL", "CO", "KR", "ID", "PE", "SG", "TR")
paises_gov_bonds <- c("NO","DE")
surexr::ifs_indicators
View(surexr::ifs_indicators)
deposit_rate <- surexr::ifs_data(indicator = "FIDR_PA",
country = paises_taxa_deposito,
start = timespan["início"],
end = timespan["final"],
freq = "M")
unique(deposit_rate$iso2c)
View(deposit_rate)
colnames(deposit_rate)
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
View(deposit_rate_wide)
gov_bonds <- surexr::ifs_data(indicator = "FIGB_PA",
country = paises_gov_bonds,
start = timespan["início"],
end = timespan["final"],
freq = "M")
gov_bonds_wide <- pivot_wider(gov_bonds, names_from = "iso2c", values_from = "FIGB_PA")
View(gov_bonds_wide)
unique(treasury_bills$iso2c)
unique(deposit_rate$iso2c)
unique(treasury_bills$iso2c) %in% unique(deposit_rate$iso2c)
unique(treasury_bills$iso2c)[which(unique(treasury_bills$iso2c) %in% unique(deposit_rate$iso2c))]
treasury_bills_ausentes
View(surexr::ifs_countries)
deposit_rate <- surexr::ifs_data(indicator = "FIDR_PA",
country = paises_taxa_deposito,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
View(deposit_rate_wide)
paises_taxa_deposito <- c("AU", "CL", "CO", "KR", "ID", "PE", "SG", "TR", "TH")
deposit_rate <- surexr::ifs_data(indicator = "FIDR_PA",
country = paises_taxa_deposito,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
View(deposit_rate_wide)
unique(treasury_bills$iso2c)[which(unique(treasury_bills$iso2c) %in% unique(deposit_rate$iso2c))]
View(treasury_bills_wide)
View(deposit_rate_wide)
select(-AU,-SG,-TH)
select(.data = treasury_bills_wide, -AU,-SG,-TH)
treasury_bills_wide <- select(.data = treasury_bills_wide, -AU,-SG,-TH)
colnames(treasury_bills_wide)
colnames(deposit_rate_wide)
var_finais <- c(colnames(treasury_bills_wide),
colnames(deposit_rate_wide),
colnames(gov_bonds_wide))
var_finais
colnames(treasury_bills_wide)[-1]
var_finais <- c(colnames(treasury_bills_wide)[-1],
colnames(deposit_rate_wide)[-1],
colnames(gov_bonds_wide)[-1])
var_finais
paises_iso[which(!paises_ino %in% var_finais)]
paises_iso[which(!paises_iso %in% var_finais)]
View(surexr::ifs_countries)
View(treasury_bills)
View(surexr::ifs_indicators)
View(treasury_bills_wide)
paises_taxa_deposito <- c("AU", "CL", "CO", "KR", "ID", "PE", "SG", "TR", "TH",
"CA", "GB", "JP", "SE")
deposit_rate <- surexr::ifs_data(indicator = "FIDR_PA",
country = paises_taxa_deposito,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
View(deposit_rate_wide)
paises_gov_bonds <- c("NO","DE","AU","CA","GB","JP","PE","SG")
gov_bonds <- surexr::ifs_data(indicator = "FIGB_PA",
country = paises_gov_bonds,
start = timespan["início"],
end = timespan["final"],
freq = "M")
gov_bonds_wide <- pivot_wider(gov_bonds, names_from = "iso2c", values_from = "FIGB_PA")
View(gov_bonds_wide)
rm(list=ls())
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
treasury_bills <- surexr::ifs_data(indicator = "FITB_PA",
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
treasury_bills_wide <- pivot_wider(treasury_bills, names_from = "iso2c", values_from = "FITB_PA")
treasury_bills_ausentes <- paises_iso[which(!paises_iso %in% unique(treasury_bills$iso2c))]
paises_taxa_deposito <- c("AU", "CL", "CO", "KR", "ID", "PE", "SG", "TR", "TH")
deposit_rate <- surexr::ifs_data(indicator = "FIDR_PA",
country = paises_taxa_deposito,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
paises_gov_bonds <- c("NO","DE")
gov_bonds <- surexr::ifs_data(indicator = "FIGB_PA",
country = paises_gov_bonds,
start = timespan["início"],
end = timespan["final"],
freq = "M")
gov_bonds_wide <- pivot_wider(gov_bonds, names_from = "iso2c", values_from = "FIGB_PA")
treasury_bills_wide <- select(.data = treasury_bills_wide, -AU,-SG,-TH)
var_finais <- c(colnames(treasury_bills_wide)[-1],
colnames(deposit_rate_wide)[-1],
colnames(gov_bonds_wide)[-1])
paises_iso[which(!paises_iso %in% var_finais)]
length(unique(var_finais))
colnames(treasury_bills_wide)[-1]
View(surexr::ifs_countries)
colnames(deposit_rate_wide)[-1]
colnames(gov_bonds_wide)[-1]
intrate_dados_descricao <- data.frame(
"País"=character(nrow(paises_iso)),
"Variável"=character(nrow(paises_iso)),
"Código"=character(nrow(paises_iso)),
"Amostra"=character(nrow(paises_iso)),
"Observações"=character(nrow(paises_iso))
)
nrow(paises_iso)
intrate_dados_descricao <- data.frame(
"País"=character(length(paises_iso)),
"Variável"=character(length(paises_iso)),
"Código"=character(length(paises_iso)),
"Amostra"=character(length(paises_iso)),
"Observações"=character(length(paises_iso))
)
View(intrate_dados_descricao)
intrate_dados_descricao$País <- paises_iso
View(intrate_dados_descricao)
intrate_dados_descricao$Variável[intrate_dados_descricao$País %in% colnames(treasury_bills_wide)]
intrate_dados_descricao$Variável[intrate_dados_descricao$País %in% colnames(treasury_bills_wide)] <- "Treasury Bills"
intrate_dados_descricao$Variável[intrate_dados_descricao$País %in% colnames(deposit_rate_wide)] <- "Deposit Rate"
intrate_dados_descricao$Variável[intrate_dados_descricao$País %in% colnames(gov_bonds_wide)] <- "Government Bonds"
cod_treasury_bills <- "FITB_PA"
cod_deposit_rate <- "FIDR_PA"
cod_gov_bonds <- "FIGB_PA"
cod_treasury_bills
# Código da série utilizada
intrate_dados_descricao$Código[intrate_dados_descricao$Variável=="Treasury Bills"] <- cod_treasury_bills
intrate_dados_descricao$Código[intrate_dados_descricao$Variável=="Deposit Rate"] <- cod_deposit_rate
intrate_dados_descricao$Código[intrate_dados_descricao$Variável=="Government Bonds"] <- cod_gov_bonds
intrate_dados_descricao <- data.frame(
"País"=character(length(paises_iso)),
"Variável"=character(length(paises_iso)),
"Código"=character(length(paises_iso)),
"Amostra"=character(length(paises_iso)),
"Frequência"=character(length(paises_iso)),
"Observações"=character(length(paises_iso))
)
intrate_dados_descricao$País <- paises_iso
# Tipo de série utilizada
intrate_dados_descricao$Variável[intrate_dados_descricao$País %in% colnames(treasury_bills_wide)] <- "Treasury Bills"
intrate_dados_descricao$Variável[intrate_dados_descricao$País %in% colnames(deposit_rate_wide)] <- "Deposit Rate"
intrate_dados_descricao$Variável[intrate_dados_descricao$País %in% colnames(gov_bonds_wide)] <- "Government Bonds"
# Código da série utilizada
intrate_dados_descricao$Código[intrate_dados_descricao$Variável=="Treasury Bills"] <- cod_treasury_bills
intrate_dados_descricao$Código[intrate_dados_descricao$Variável=="Deposit Rate"] <- cod_deposit_rate
intrate_dados_descricao$Código[intrate_dados_descricao$Variável=="Government Bonds"] <- cod_gov_bonds
paises_iso[which(!paises_iso %in% var_finais)]
rm(list=ls())
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
# Nesta seção define-se os códigos que serão utilizadoss para cada uma das
# séries.
cod_treasury_bills <- "FITB_PA"
cod_deposit_rate <- "FIDR_PA"
cod_gov_bonds <- "FIGB_PA"
treasury_bills <- surexr::ifs_data(indicator = cod_treasury_bills,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
treasury_bills_wide <- pivot_wider(treasury_bills, names_from = "iso2c", values_from = "FITB_PA")
treasury_bills_ausentes <- paises_iso[which(!paises_iso %in% unique(treasury_bills$iso2c))]
deposit_rate <- surexr::ifs_data(indicator = cod_deposit_rate,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
gov_bonds <- surexr::ifs_data(indicator = cod_gov_bonds,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
gov_bonds_wide <- pivot_wider(gov_bonds, names_from = "iso2c", values_from = "FIGB_PA")
rm(list=ls())
library(tidyverse)
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
# Nesta seção define-se os códigos que serão utilizadoss para cada uma das
# séries.
cod_treasury_bills <- "FITB_PA"
cod_deposit_rate <- "FIDR_PA"
cod_gov_bonds <- "FIGB_PA"
treasury_bills <- surexr::ifs_data(indicator = cod_treasury_bills,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
treasury_bills_wide <- pivot_wider(treasury_bills, names_from = "iso2c", values_from = "FITB_PA")
deposit_rate <- surexr::ifs_data(indicator = cod_deposit_rate,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
gov_bonds <- surexr::ifs_data(indicator = cod_gov_bonds,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
gov_bonds_wide <- pivot_wider(gov_bonds, names_from = "iso2c", values_from = "FIGB_PA")
rm(list=ls())
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
# Nesta seção define-se os códigos que serão utilizadoss para cada uma das
# séries.
cod_treasury_bills <- "FITB_PA"
cod_deposit_rate <- "FIDR_PA"
cod_gov_bonds <- "FIGB_PA"
treasury_bills <- surexr::ifs_data(indicator = cod_treasury_bills,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
treasury_bills_wide <- pivot_wider(treasury_bills, names_from = "iso2c", values_from = "FITB_PA")
deposit_rate <- surexr::ifs_data(indicator = cod_deposit_rate,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
gov_bonds <- surexr::ifs_data(indicator = cod_gov_bonds,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
gov_bonds_wide <- pivot_wider(gov_bonds, names_from = "iso2c", values_from = "FIGB_PA")
View(treasury_bills_wide)
View(gov_bonds_wide)
View(deposit_rate_wide)
paises_iso
deposit_rate <- surexr::ifs_data(indicator = cod_deposit_rate,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate <- surexr::ifs_data(indicator = cod_deposit_rate,
country = paises_iso,
start = timespan["início"],
end = timespan["final"],
freq = "M")
deposit_rate_wide <- pivot_wider(deposit_rate, names_from = "iso2c", values_from = "FIDR_PA")
View(deposit_rate_wide)
paises_iso
# treasury bills
treasury_bills_selecionados <- select(.data = treasury_bills_wide,
BR, HU, IL, MX, NZ, TH, US, ZA)
View(treasury_bills_selecionados)
# treasury bills
treasury_bills_selecionados <- select(.data = treasury_bills_wide,
year_month,
BR, HU, IL, MX, NZ, TH, US, ZA)
rm(list=ls())
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
exrate_paises_iso <- surexr::ifs_data(indicator = "ENDE_XDC_USD_RATE",
country = paises_iso,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = as.character(timespan["frequência"]))
cod_exrate <- "ENDE_XDC_USD_RATE"
exrate_paises_iso <- surexr::ifs_data(indicator = cod_exrate,
country = paises_iso,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = as.character(timespan["frequência"]))
exrate_EA <- surexr::ifs_data(indicator = cod_exrate,
country = "U2",
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = as.character(timespan["frequência"]))
exrate_EA$iso2c <- "DE"
exrate <- dplyr::bind_rows(exrate_paises_iso, exrate_EA)
View(exrate)
corte_2014t2 <- c("2014-07","2014-08","2014-09","2014-10","2014-11","2014-12")
exrate_2014 <- dplyr::filter(.data = exrate, !exrate$year_month %in% corte_2014t2)
save(exrate, file = "exrate.Rdata")
save(exrate_2014, file = "exrate_2014.Rdata")
save(exrate, file = "data//exrate.Rdata")
save(exrate_2014, file = "data//exrate_2014.Rdata")
library(tidyverse)
colnames(exrate)
exrate_wide <- pivot_wider(data = exrate,names_from = "iso2c",values_from = "ENDE_XDC_USD_RATE")
View(exrate_wide)
library(tidyverse)
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
rm(list=ls())
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data//paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
save(timespan, file = "data/timespan.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data//timespan.Rdata")
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data/paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data/timespan.Rdata")
# Vetor timespan
timespan <- c(1999, 2020, "M")
names(timespan) <- c("início","final","frequência")
save(timespan, file = "data/timespan.Rdata")
rm(list=ls())
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data/paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data/timespan.Rdata")
# Usa surexr::ifs_data para baixar o volume de PIB trimestral, em USD, 2010=100, sazonalmente ajustado
# Os países são aqueles definidos em países_iso
# O período amostral é aquele definido em timespan
# É preciso assegurar que start e end sejam valores numéricos, daí o uso de as.numeric
# Analogamente para freq, que deve ser character
# NGDP_R_K_SA_IX conforme surexr::ifs_indicators
gdp_sa <- surexr::ifs_data(indicator = "NGDP_R_K_SA_IX",
country = paises_iso,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = "Q")
# Segundo a dissertação, há países que não possuem dados sazonalmente ajustados na base. Quais?
gdp_sa_faltantes <- paises_iso[which(!paises_iso %in% gdp_sa$iso2c)]
# Mesmo processo anterior, mas para países em gdp_sa_faltantes
# Código: NGDP_R_K_IX
gdp_nsa <- surexr::ifs_data(indicator = "NGDP_R_K_IX",
country = gdp_sa_faltantes,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = "Q")
cod_gdp_sa <- "NGDP_R_K_SA_IX"
# Usa surexr::ifs_data para baixar o volume de PIB trimestral, em USD, 2010=100, sazonalmente ajustado
# Os países são aqueles definidos em países_iso
# O período amostral é aquele definido em timespan
# É preciso assegurar que start e end sejam valores numéricos, daí o uso de as.numeric
# Analogamente para freq, que deve ser character
# NGDP_R_K_SA_IX conforme surexr::ifs_indicators
gdp_sa <- surexr::ifs_data(indicator = cod_gdp_sa,
country = paises_iso,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = "Q")
cod_gdp_nsa <- "NGDP_R_K_IX"
# Mesmo processo anterior, mas para países em gdp_sa_faltantes
# Código: NGDP_R_K_IX
gdp_nsa <- surexr::ifs_data(indicator = cod_gdp_nsa,
country = gdp_sa_faltantes,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = "Q")
paste0(getwd(),"/x13as")
# Definição do caminho do executável x13
x13_path <- paste0(getwd(),"/x13as")
Sys.setenv(X13_PATH = x13_path)
install.packages("seasonal")
View(gdp_nsa)
View(gdp_nsa)
ts(start = c(1999, 1), end = c(2017, 1), frequency = 4)
# Transformação das séries em objetos do tipo ts
ts_pe <- gdp_nsa %>%
pivot_wider(names_f rom = "iso2c",values_from = cod_gdp_nsa) %>%
select(PE) %>%
ts(start = c(1999, 1), end = c(2017, 1), frequency = 4)
# Transformação das séries em objetos do tipo ts
ts_pe <- gdp_nsa %>%
pivot_wider(names_from = "iso2c",values_from = cod_gdp_nsa) %>%
select(PE) %>%
ts(start = c(1999, 1), end = c(2017, 1), frequency = 4)
ts_tr <- gdp_nsa %>%
pivot_wider(names_from = "iso2c",values_from = cod_gdp_nsa) %>%
select(TR) %>%
ts(start = c(1999, 1), end = c(2020, 2), frequency = 4)
# Ajuste sazonal automático
gdp_pe_ajustada <- seasonal::seas(x = ts_pe)
View(gdp_pe_ajustada)
gdp_pe_ajustada[["x"]]
gdp_pe_ajustada[["data"]]
gdp_tr_ajustada <- seasonal::seas(x = ts_tr)
View(gdp_tr_ajustada)
gdp_tr_ajustada[["data"]]
gdp <- bind_rows(gdp_nsa, gdp_sa)
View(gdp)
colnames(gdp_nsa)[2] <- cod_gdp_sa
gdp <- bind_rows(gdp_nsa, gdp_sa)
View(gdp_nsa)
rm(list=ls())
# Carrega a imagem de países conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças nos países, verificar se nova versão de países_iso.Rdata foi salva
load(file = "data/paises_iso.Rdata")
# Carrega a imagem do período amostral conforme gerada por definir_base.R
# ATENÇÃO: se houver mudanças no período amostral, verificar se nova versão de timespan.Rdata foi salva
load(file = "data/timespan.Rdata")
cod_gdp_sa <- "NGDP_R_K_SA_IX"
cod_gdp_nsa <- "NGDP_R_K_IX"
# Usa surexr::ifs_data para baixar o volume de PIB trimestral, em USD, 2010=100, sazonalmente ajustado
# Os países são aqueles definidos em países_iso
# O período amostral é aquele definido em timespan
# É preciso assegurar que start e end sejam valores numéricos, daí o uso de as.numeric
# Analogamente para freq, que deve ser character
# NGDP_R_K_SA_IX conforme surexr::ifs_indicators
gdp_sa <- surexr::ifs_data(indicator = cod_gdp_sa,
country = paises_iso,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = "Q")
# Segundo a dissertação, há países que não possuem dados sazonalmente ajustados na base. Quais?
gdp_sa_faltantes <- paises_iso[which(!paises_iso %in% gdp_sa$iso2c)]
# Mesmo processo anterior, mas para países em gdp_sa_faltantes
# Código: NGDP_R_K_IX
gdp_nsa <- surexr::ifs_data(indicator = cod_gdp_nsa,
country = gdp_sa_faltantes,
start = as.numeric(timespan["início"]),
end = as.numeric(timespan["final"]),
freq = "Q")
colnames(gdp_nsa)[3] <- cod_gdp_sa
gdp <- bind_rows(gdp_nsa, gdp_sa)
View(gdp)
gdp_wide <- pivot_wider(data = gdp, names_from = "iso2c", values_from = cod_gdp_sa)
View(gdp_wide)
